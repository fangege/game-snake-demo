# 项目上下文

## 项目目的
这是一个贪食蛇游戏演示项目，旨在展示网络游戏同步的不同实现方案：
- **教育目的**：帮助开发者理解网络游戏同步机制
- **技术演示**：使用纯 HTML5 实现，无需游戏引擎
- **对比学习**：展示状态同步、帧同步等不同同步策略的实现差异

## 技术栈
- **后端**：Node.js + Express.js
- **前端**：HTML5 + Canvas + 原生 JavaScript
- **模板引擎**：EJS
- **实时通信**：HTTP 轮询 + WebSocket
- **依赖管理**：npm
- **其他工具**：Cookie-parser, Socket.io

## 项目约定

### 代码风格
- 使用驼峰命名法（camelCase）
- 常量使用全大写加下划线（CONSTANT_NAME）
- 文件名使用小写加下划线（snake_case）
- 缩进使用 4 个空格
- 中文注释和文档

### 架构模式
- **MVC 架构**：Model（游戏状态）、View（Canvas 渲染）、Controller（事件处理）
- **客户端-服务器架构**：支持多种同步模式
- **状态机模式**：游戏状态管理
- **事件驱动**：基于用户输入和定时器的事件处理

### 测试策略
- 当前项目为演示性质，暂无自动化测试
- 通过多浏览器手动测试验证同步效果
- 建议后续添加单元测试和集成测试

### Git 工作流
- 使用简单的 master 分支开发
- 提交信息使用中文描述
- 功能性提交优先于代码整理提交

## 领域上下文

### 网络游戏同步概念
1. **状态同步**：服务端维护权威游戏状态，客户端定时同步
   - 优点：实现简单，安全性好
   - 缺点：带宽消耗大，服务端压力大

2. **帧同步**：客户端计算游戏逻辑，服务端同步操作指令
   - 优点：带宽消耗小，客户端性能利用充分
   - 缺点：实现复杂，需要确定性逻辑

3. **混合同步**：结合状态同步和帧同步的优点

### 游戏机制
- **双人贪食蛇**：player1（WASD 键）、player2（方向键）
- **游戏元素**：蛇（位置、方向、长度）、食物（随机位置）
- **碰撞检测**：边界反弹、食物消费
- **回合制**：基于固定时间间隔的游戏循环

## 重要约束
- **浏览器兼容性**：需支持 HTML5 Canvas
- **网络延迟**：演示项目，未优化网络延迟处理
- **并发限制**：单服务器实例，适合小规模演示
- **数据持久化**：游戏状态仅存储在内存中
- **安全性**：演示项目，未实现防作弊机制

## 外部依赖
- **Express.js**：Web 服务器框架
- **Socket.io**：WebSocket 实时通信（WebSocket 版本）
- **EJS**：服务端模板渲染
- **Cookie-parser**：用户会话管理
- **浏览器 Canvas API**：游戏渲染
- **浏览器事件 API**：键盘输入处理
